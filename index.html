<!DOCTYPE html>
<html>
<head>
  <title>FastX Tracking</title>
  <style>
    body{
      background:#0f172a;
      color:white;
      text-align:center;
      padding-top:100px;
      font-family:Arial;
    }
    input{
      padding:10px;
      width:250px;
      border-radius:5px;
      border:none;
    }
    button{
      padding:10px 20px;
      background:#3b82f6;
      border:none;
      color:white;
      border-radius:5px;
      cursor:pointer;
    }
  </style>
</head>
<body>

  <h1>FastX Tracking System</h1>
  
  <hr>
  <h3>Admin: Create New Order</h3>
  <button onclick="createOrder()">Generate Tracking Code</button>
  <p id="newCode"></p>
  <hr>
  <input type="text" id="trackInput" placeholder="Enter Tracking Code">
  <br><br>
  <button onclick="checkTracking()">Track>
  
  <div id="result" style="margin-top:30px;"></div>

   <!-- Firebase SDK -->
<script type="module">

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "PASTE_YOUR_API_KEY",
    authDomain: "PASTE_YOUR_AUTH_DOMAIN",
    projectId: "PASTE_YOUR_PROJECT_ID",
    storageBucket: "PASTE_YOUR_STORAGE_BUCKET",
    messagingSenderId: "PASTE_YOUR_SENDER_ID",
    appId: "PASTE_YOUR_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Generate tracking code
  function generateTrackingCode() {
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const country = letters[Math.floor(Math.random() * letters.length)] +
                    letters[Math.floor(Math.random() * letters.length)];
    const year = new Date().getFullYear();
    const randomNum = Math.floor(10000 + Math.random() * 90000);
    return `FX-${country}-${year}-${randomNum}`;
  }

  // Create order in Firebase
  window.createOrder = async function() {
    const newCode = generateTrackingCode();

    await setDoc(doc(db, "tracking", newCode), {
      status: "Processing",
      location: "Warehouse"
    });

    document.getElementById("newCode").innerHTML =
      "New Tracking Code: <b>" + newCode + "</b>";
  }

  // Check tracking from Firebase
  window.checkTracking = async function() {
    const code = document.getElementById("trackInput").value.trim();
    const resultBox = document.getElementById("result");

    const docRef = doc(db, "tracking", code);
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
      const data = docSnap.data();

      resultBox.innerHTML = `
        <h3 style="color:lime;">Tracking Found ✅</h3>
        <p>Status: ${data.status}</p>
        <p>Location: ${data.location}</p>
      `;
    } else {
      resultBox.innerHTML = `
        <h3 style="color:red;">Tracking code not found ❌</h3>
      `;
    }
  }

</script>

</body>
<script> type="module" src="script.js"></script>
</html>
